import{_ as u,s as f,r as g,c as y,o as s,w as r,b as t,d as h,n as _,a as m,t as l,F as a,e as c}from"./index-NXnxvJjD.js";const p={name:"Gotify",mixins:[f],props:{item:Object},data:()=>({health:{},messages:0}),computed:{status:function(){const e=[this.health.health,this.health.database];return e.includes("red")?"red":e.includes("orange")?"orange":"green"}},created(){this.fetchStatus(),this.fetchMessages()},methods:{fetchStatus:async function(){await this.fetch("/health").catch(e=>console.log(e)).then(e=>this.health=e)},fetchMessages:async function(){const e={"X-Gotify-Key":this.item.apikey};await this.fetch("/message?limit=100",{headers:e}).catch(n=>console.log(n)).then(n=>this.messages=n.messages.length)}}},k={class:"title is-4"},b={class:"subtitle is-6"};function G(e,n,i,v,w,o){const d=g("Generic");return s(),y(d,{item:i.item},{content:r(()=>[m("p",k,l(i.item.name),1),m("p",b,[e.messages>0?(s(),t(a,{key:0},[e.messages>100?(s(),t(a,{key:0},[c("100+")],64)):(s(),t(a,{key:1},[c(l(e.messages),1)],64)),e.messages===1?(s(),t(a,{key:2},[c(" message")],64)):(s(),t(a,{key:3},[c(" messages")],64))],64)):h("",!0)])]),indicator:r(()=>[o.status?(s(),t("div",{key:0,class:_(["status",o.status])},null,2)):h("",!0)]),_:1},8,["item"])}const C=u(p,[["render",G],["__scopeId","data-v-ee776b40"]]);export{C as default};
