import{_ as l,s as u,r as f,c as h,o as s,w as m,a as p,b as a,d as o,t as c}from"./index-NXnxvJjD.js";const _={name:"Scrutiny",mixins:[u],props:{item:Object},data:()=>({passed:null,failed:null,unknown:null,serverError:!1}),created:function(){const e=parseInt(this.item.updateInterval,10)||0;e>0&&setInterval(()=>this.fetchSummary(),e),this.fetchSummary()},methods:{fetchSummary:function(){this.fetch("/api/summary").then(e=>{var r,i;const n=Object.values(e.data.summary);this.passed=((r=n.filter(t=>t.device.device_status===0))==null?void 0:r.length)||0,this.failed=((i=n.filter(t=>t.device.device_status>0&&t.device.device_status<=3))==null?void 0:i.length)||0,this.unknown=n.length-(this.passed+this.failed)||0}).catch(e=>{console.error(e),this.serverError=!0})}}},v={class:"notifs"},y={key:0,class:"notif passed",title:"Passed"},k={key:1,class:"notif failed",title:"Failed"},g={key:2,class:"notif unknown",title:"Unknown"},w={key:3,class:"notif errors",title:"Connection error to Scrutiny API, check your url in config.yml"};function S(e,n,r,i,t,I){const d=f("Generic");return s(),h(d,{item:r.item},{indicator:m(()=>[p("div",v,[e.passed>0?(s(),a("strong",y,c(e.passed),1)):o("",!0),e.failed>0?(s(),a("strong",k,c(e.failed),1)):o("",!0),e.unknown>0?(s(),a("strong",g,c(e.unknown),1)):o("",!0),e.serverError?(s(),a("strong",w,"?")):o("",!0)])]),_:1},8,["item"])}const B=l(_,[["render",S],["__scopeId","data-v-0316afbb"]]);export{B as default};
