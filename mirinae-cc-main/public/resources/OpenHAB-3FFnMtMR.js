import{_ as l,s as d,r as f,c as g,o as i,w as c,b as a,d as _,n as p,t as n,a as o,F as h,e as r}from"./index-NXnxvJjD.js";const y={name:"OpenHAB",mixins:[d],props:{item:Object},data:()=>({status:"",things:{count:0,online:0},items:{count:0}}),computed:{headers:function(){const t=`${this.item.apikey}:`;return{Authorization:`Basic ${btoa(t)}`}},details:function(){const t=[];return this.item.things&&t.push(`${this.things.count} things (${this.things.online} Online)`),this.item.items&&t.push(`${this.items.count} items`),t.join(", ")}},created(){this.fetchServerStatus(),!this.item.subtitle&&this.status!=="dead"&&this.fetchServerStats()},methods:{fetchServerStatus:async function(){const t=this.headers;this.fetch("/rest/systeminfo",{headers:t}).then(s=>{if(s&&s.systemInfo)this.status="running";else throw new Error}).catch(s=>{console.log(s),this.status="dead"})},fetchServerStats:async function(){const t=this.headers;if(this.item.things){const s=await this.fetch("/rest/things?summary=true",{headers:t}).catch(e=>{console.log(e)});this.things.count=s.length,this.things.online=s.filter(e=>e.statusInfo.status==="ONLINE").length}if(this.item.items){const s=await this.fetch("/rest/items",{headers:t}).catch(e=>{console.log(e)});this.items.count=s.length}}}},S={class:"title is-4"},b={class:"subtitle is-6"};function v(t,s,e,k,B,u){const m=f("Generic");return i(),g(m,{item:e.item},{content:c(()=>[o("p",S,n(e.item.name),1),o("p",b,[e.item.subtitle?(i(),a(h,{key:0},[r(n(e.item.subtitle),1)],64)):(i(),a(h,{key:1},[r(n(u.details),1)],64))])]),indicator:c(()=>[t.status?(i(),a("div",{key:0,class:p(["status",t.status])},n(t.status),3)):_("",!0)]),_:1},8,["item"])}const N=l(y,[["render",v],["__scopeId","data-v-066f0589"]]);export{N as default};
