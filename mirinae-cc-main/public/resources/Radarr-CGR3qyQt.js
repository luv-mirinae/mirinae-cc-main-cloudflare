import{_ as h,s as l,r as f,c as p,o as s,w as d,a as g,b as r,d as a,t as o}from"./index-NXnxvJjD.js";const m="/api/v3",y="/api",k={name:"Radarr",mixins:[l],props:{item:Object},data:()=>({activity:null,missing:null,warnings:null,errors:null,serverError:!1}),computed:{apiPath(){return this.item.legacyApi?y:m}},created:function(){const t=parseInt(this.item.checkInterval,10)||0;t>0&&setInterval(()=>this.fetchConfig(),t),this.fetchConfig()},methods:{fetchConfig:function(){const t=i=>{console.error(i),this.serverError=!0};this.fetch(`${this.apiPath}/health?apikey=${this.item.apikey}`).then(i=>{this.warnings=0,this.errors=0;for(var e=0;e<i.length;e++)i[e].type=="warning"?this.warnings++:i[e].type=="error"&&this.errors++}).catch(t),this.item.legacyApi||this.fetch(`${this.apiPath}/queue/details?apikey=${this.item.apikey}`).then(i=>{for(var e=0;e<i.length;e++)i[e].trackedDownloadStatus=="warning"?this.warnings++:i[e].trackedDownloadStaus=="error"&&this.errors++}).catch(t),this.fetch(`${this.apiPath}/queue?apikey=${this.item.apikey}`).then(i=>{if(this.activity=0,this.item.legacyApi)for(var e=0;e<i.length;e++)i[e].movie&&this.activity++;else this.activity=i.totalRecords}).catch(t),this.item.legacyApi||this.fetch(`${this.apiPath}/wanted/missing?pageSize=1&apikey=${this.item.apikey}`).then(i=>{this.fetch(`${this.apiPath}/wanted/missing?pageSize=${i.totalRecords}&apikey=${this.item.apikey}`).then(e=>{this.missing=e.records.filter(n=>n.monitored&&n.isAvailable&&!n.hasFile).length})}).catch(t)}}},v={class:"notifs"},_={key:0,class:"notif activity",title:"Activity"},u={key:1,class:"notif missing",title:"Missing"},w={key:2,class:"notif warnings",title:"Warning"},$={key:3,class:"notif errors",title:"Error"},A={key:4,class:"notif errors",title:"Connection error to Radarr API, check url and apikey in config.yml"};function P(t,i,e,n,C,I){const c=f("Generic");return s(),p(c,{item:e.item},{indicator:d(()=>[g("div",v,[t.activity>0?(s(),r("strong",_,o(t.activity),1)):a("",!0),t.missing>0?(s(),r("strong",u,o(t.missing),1)):a("",!0),t.warnings>0?(s(),r("strong",w,o(t.warnings),1)):a("",!0),t.errors>0?(s(),r("strong",$,o(t.errors),1)):a("",!0),t.serverError?(s(),r("strong",A,"?")):a("",!0)])]),_:1},8,["item"])}const R=h(k,[["render",P],["__scopeId","data-v-07306fed"]]);export{R as default};
