import{_ as m,s as f,r as p,c as g,o as i,w as u,b as c,d as h,n as _,t as n,a as l,F as o,e as d}from"./index-NXnxvJjD.js";const k={name:"UptimeKuma",mixins:[f],props:{item:Object},data:()=>({incident:null,heartbeat:null}),computed:{dashboard:function(){return this.item.slug?this.item.slug:"default"},status:function(){return this.incident?this.incident.incident==null?this.pageStatus:"bad":""},lastHeartBeatList:function(){let t={};for(let e in this.heartbeat.heartbeatList){let a=this.heartbeat.heartbeatList[e].length-1;t[e]=this.heartbeat.heartbeatList[e][a]}return t},pageStatus:function(){if(!this.heartbeat||Object.keys(this.heartbeat.heartbeatList).length===0)return"";let t="good",e=!1;for(let a in this.lastHeartBeatList)this.lastHeartBeatList[a].status==1?e=!0:t="warn";return e||(t="bad"),t},statusMessage:function(){if(!this.incident)return"";if(this.incident.incident)return this.incident.incident.title;let t="";switch(this.pageStatus){case"good":t="All Systems Operational";break;case"warn":t="Partially Degraded Service";break;case"bad":t="Degraded Service";break;default:t="Unknown service status"}return t},uptime:function(){if(!this.heartbeat)return 0;const t=Object.values(this.heartbeat.uptimeList);return((t.reduce((a,r)=>a+r,0)/t.length||0)*100).toFixed(1)}},created(){this.item.url=`${this.item.url}/status/${this.dashboard}`,this.fetchStatus()},methods:{fetchStatus:function(){const t=Date.now();this.fetch(`/api/status-page/${this.dashboard}?cachebust=${t}`).catch(e=>console.error(e)).then(e=>this.incident=e),this.fetch(`/api/status-page/heartbeat/${this.dashboard}?cachebust=${t}`).catch(e=>console.error(e)).then(e=>this.heartbeat=e)}}},S={class:"title is-4"},v={class:"subtitle is-6"};function w(t,e,a,r,x,s){const b=p("Generic");return i(),g(b,{item:a.item},{content:u(()=>[l("p",S,n(a.item.name),1),l("p",v,[a.item.subtitle?(i(),c(o,{key:0},[d(n(a.item.subtitle),1)],64)):s.status?(i(),c(o,{key:1},[d(n(s.statusMessage),1)],64)):h("",!0)])]),indicator:u(()=>[s.status?(i(),c("div",{key:0,class:_(["status",s.status])},n(s.uptime)+"% ",3)):h("",!0)]),_:1},8,["item"])}const y=m(k,[["render",w],["__scopeId","data-v-46a70f39"]]);export{y as default};
