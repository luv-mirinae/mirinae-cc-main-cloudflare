import{_ as f,s as _,r as p,c as v,o as i,w as c,b as o,d as k,n as y,t as a,a as h,F as m,e as d}from"./index-NXnxvJjD.js";const b={name:"HomeAssistant",mixins:[_],props:{item:Object},data:()=>({status:"",version:"",entities:0,location_name:"",separator:" ",items:["name","version"]}),computed:{headers:function(){return{Authorization:`Bearer ${this.item.apikey}`,"Content-Type":"application/json"}},details:function(){const e=[],t=this.items,s=this.separator;for(const r in t){const n=t[r];switch(n){case"version":e.push(`v${this.version}`);break;case"name":e.push(`${this.location_name}`);break;case"entities":e.push(`${this.entities} entities`);break;default:e.push(`undefined key ${n} `)}}return e.join(s)}},created(){this.fetchServerStatus().then(()=>{!this.item.subtitle&&this.status!=="dead"&&(this.item.items&&(this.items=this.item.items),this.item.separator&&(this.separator=this.item.separator),this.fetchServerStats())})},methods:{fetchServerStatus:async function(){const e=this.headers;return this.fetch("/api/",{headers:e}).then(t=>{if(t&&t.message)this.status="running";else throw new Error}).catch(t=>{console.log(t),this.status="dead"})},fetchServerStats:async function(){const e=this.headers;this.fetch("/api/config",{headers:e}).then(t=>{if(t)t.version&&(this.version=t.version),t.location_name&&(this.location_name=t.location_name);else throw new Error}).catch(t=>{console.log(t),this.status="dead"}),this.fetch("/api/states",{headers:e}).then(t=>{if(t)this.entities=t.length;else throw new Error}).catch(t=>{console.log(t),this.status="dead"})}}},g={class:"title is-4"},w={class:"subtitle is-6"};function S(e,t,s,r,n,l){const u=p("Generic");return i(),v(u,{item:s.item},{content:c(()=>[h("p",g,a(s.item.name),1),h("p",w,[s.item.subtitle?(i(),o(m,{key:0},[d(a(s.item.subtitle),1)],64)):(i(),o(m,{key:1},[d(a(l.details),1)],64))])]),indicator:c(()=>[e.status?(i(),o("div",{key:0,class:y(["status",e.status])},a(e.status),3)):k("",!0)]),_:1},8,["item"])}const C=f(b,[["render",S],["__scopeId","data-v-d44d2f06"]]);export{C as default};
