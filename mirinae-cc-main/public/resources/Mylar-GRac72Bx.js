import{_ as c,s as l,r as d,c as h,o as n,w as m,a as p,b as o,d as s,t as r}from"./index-NXnxvJjD.js";const u={name:"Mylar",mixins:[l],props:{item:Object},data:()=>({upcoming:null,wanted:null,warnings:null,errors:null,serverError:!1}),created:function(){this.fetchConfig()},methods:{fetchConfig:function(){const e=t=>{console.error(t),this.serverError=!0};this.fetch(`/api?cmd=getUpcoming&apikey=${this.item.apikey}`).then(t=>{this.upcoming=t.length}).catch(e),this.fetch(`/api?cmd=getWanted&apikey=${this.item.apikey}`).then(t=>{this.wanted=t.issues.length+t.annuals.length}).catch(e)}}},f={class:"notifs"},g={key:0,class:"notif wanted",title:"Wanted"},_={key:1,class:"notif upcoming",title:"Upcoming"},y={key:2,class:"notif errors",title:"Connection error to Mylar API, check url and apikey in config.yml"};function k(e,t,i,v,w,C){const a=d("Generic");return n(),h(a,{item:i.item},{indicator:m(()=>[p("div",f,[e.wanted>0?(n(),o("strong",g,r(e.wanted),1)):s("",!0),e.upcoming>0?(n(),o("strong",_,r(e.upcoming),1)):s("",!0),e.serverError?(n(),o("strong",y," ? ")):s("",!0)])]),_:1},8,["item"])}const $=c(u,[["render",k],["__scopeId","data-v-730694ee"]]);export{$ as default};
