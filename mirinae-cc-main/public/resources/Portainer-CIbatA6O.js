import{_,s as g,r as k,c as p,o as i,w as d,a as u,b as a,d as o,t as r,n as y,F as l,e as f}from"./index-NXnxvJjD.js";const v={name:"Portainer",mixins:[g],props:{item:Object},data:()=>({endpoints:null,containers:null,fetchOk:null,versionstring:null}),computed:{running:function(){return this.containers?this.containers.filter(t=>t.State.toLowerCase()==="running").length:""},dead:function(){return this.containers?this.containers.filter(t=>t.State.toLowerCase()==="dead").length:""},misc:function(){return this.containers?this.containers.filter(t=>t.State.toLowerCase()!=="running"&&t.State.toLowerCase()!=="dead").length:""},status:function(){return this.fetchOk?"online":"offline"}},created(){this.fetchStatus(),this.fetchVersion()},methods:{fetchStatus:async function(){const t={"X-Api-Key":this.item.apikey};this.endpoints=await this.fetch("/api/endpoints",{headers:t}).catch(n=>{console.error(n)});let s=[];for(let n of this.endpoints){if(this.item.environments&&!this.item.environments.includes(n.Name))continue;const h=`/api/endpoints/${n.Id}/docker/containers/json?all=1`,c=await this.fetch(h,{headers:t}).catch(e=>{console.error(e)});c&&(s=s.concat(c))}this.containers=s},fetchVersion:async function(){const t={"X-Api-Key":this.item.apikey};this.fetch("/api/status",{headers:t}).then(s=>{this.fetchOk=!0,this.versionstring=s.Version}).catch(s=>{this.fetchOk=!1,console.error(s)})}}},C={class:"title is-4"},w={class:"subtitle is-6"},S={class:"notifs"},V={key:0,class:"notif running",title:"Running"},O={key:1,class:"notif dead",title:"Dead"},b={key:2,class:"notif misc",title:"Other (creating, paused, exited, etc.)"};function x(t,s,n,h,c,e){const m=k("Generic");return i(),p(m,{item:n.item},{content:d(()=>[u("p",C,r(n.item.name),1),u("p",w,[n.item.subtitle?(i(),a(l,{key:0},[f(r(n.item.subtitle),1)],64)):t.versionstring?(i(),a(l,{key:1},[f(" Version "+r(t.versionstring),1)],64)):o("",!0)])]),indicator:d(()=>[u("div",S,[e.running>0?(i(),a("strong",V,r(e.running),1)):o("",!0),e.dead>0?(i(),a("strong",O,r(e.dead),1)):o("",!0),e.misc>0?(i(),a("strong",b,r(e.misc),1)):o("",!0)]),e.status?(i(),a("div",{key:0,class:y(["status",e.status])},r(e.status),3)):o("",!0)]),_:1},8,["item"])}const L=_(v,[["render",x],["__scopeId","data-v-3e6efa26"]]);export{L as default};
