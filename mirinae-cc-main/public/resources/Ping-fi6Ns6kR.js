import{_ as f,s as p,r as _,c as b,o as s,w as c,a as m,t as a,b as n,F as l,e as u,d as g,n as v}from"./index-NXnxvJjD.js";const I={name:"Ping",mixins:[p],props:{item:Object},data:()=>({status:null,rtt:null}),computed:{rttLabel:function(){return this.status==="online"?`${this.rtt}ms`:"unavailable"}},created(){const t=parseInt(this.item.updateInterval,10)||0;t>0&&setInterval(this.fetchStatus,t),this.fetchStatus()},methods:{fetchStatus:async function(){const t=typeof this.item.method=="string"?this.item.method.toUpperCase():"HEAD";if(!["GET","HEAD","OPTION"].includes(t)){console.error(`Ping: ${t} is not a supported HTTP method`);return}const i=performance.now(),e=parseInt(this.item.timeout,10)||2e3,o={method:t,cache:"no-cache",signal:AbortSignal.timeout(e)};this.fetch("/",o,!1).then(()=>{this.status="online";const r=performance.now();this.rtt=Math.round(r-i)}).catch(()=>{this.status="offline",this.rtt=null})}}},T={class:"title is-4"},k={class:"subtitle is-6"};function y(t,i,e,o,r,h){const d=_("Generic");return s(),b(d,{item:e.item},{indicator:c(()=>[t.status?(s(),n("div",{key:0,class:v(["status",t.status])},a(t.status),3)):g("",!0)]),content:c(()=>[m("p",T,a(e.item.name),1),m("p",k,[e.item.subtitle?(s(),n(l,{key:0},[u(a(e.item.subtitle),1)],64)):(s(),n(l,{key:1},[u(a(h.rttLabel),1)],64))])]),_:1},8,["item"])}const P=f(I,[["render",y],["__scopeId","data-v-497618f4"]]);export{P as default};
