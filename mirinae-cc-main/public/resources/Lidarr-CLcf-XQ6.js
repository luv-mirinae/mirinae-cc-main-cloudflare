import{_ as c,s as h,r as l,c as f,o as i,w as d,a as g,b as r,d as n,t as o}from"./index-NXnxvJjD.js";const m={name:"Lidarr",mixins:[h],props:{item:Object},data:()=>({activity:null,missing:null,warnings:null,errors:null,serverError:!1}),created:function(){const t=parseInt(this.item.checkInterval,10)||0;t>0&&setInterval(()=>this.fetchConfig(),t),this.fetchConfig()},methods:{fetchConfig:function(){const t=e=>{console.error(e),this.serverError=!0};this.fetch(`/api/v1/health?apikey=${this.item.apikey}`).then(e=>{this.warnings=0,this.errors=0;for(var s=0;s<e.length;s++)e[s].type=="warning"?this.warnings++:e[s].type=="error"&&this.errors++}).catch(t),this.fetch(`/api/v1/queue/status?apikey=${this.item.apikey}`).then(e=>{this.activity=e.totalCount}).catch(t),this.fetch(`/api/v1/wanted/missing?apikey=${this.item.apikey}`).then(e=>{this.missing=e.totalRecords}).catch(t)}}},p={class:"notifs"},u={key:0,class:"notif activity",title:"Activity"},y={key:1,class:"notif missing",title:"Missing"},v={key:2,class:"notif warnings",title:"Warning"},k={key:3,class:"notif errors",title:"Error"},_={key:4,class:"notif errors",title:"Connection error to Lidarr API, check url and apikey in config.yml"};function w(t,e,s,C,E,I){const a=l("Generic");return i(),f(a,{item:s.item},{indicator:d(()=>[g("div",p,[t.activity>0?(i(),r("strong",u,o(t.activity),1)):n("",!0),t.missing>0?(i(),r("strong",y,o(t.missing),1)):n("",!0),t.warnings>0?(i(),r("strong",v,o(t.warnings),1)):n("",!0),t.errors>0?(i(),r("strong",k,o(t.errors),1)):n("",!0),t.serverError?(i(),r("strong",_,"?")):n("",!0)])]),_:1},8,["item"])}const B=c(m,[["render",w],["__scopeId","data-v-6c1e6d05"]]);export{B as default};
