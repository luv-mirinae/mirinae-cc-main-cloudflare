import{_ as h,s as u,r as l,c as d,o as s,w as m,a as f,b as i,d as r,t as n}from"./index-NXnxvJjD.js";const p={name:"Immich",mixins:[u],props:{item:Object},data:()=>({users:null,photos:null,videos:null,usage:null,serverError:!1}),computed:{humanizeSize:function(){let e=this.usage;if(Math.abs(e)<1024)return e+" B";const t=["KiB","MiB","GiB","TiB"];let o=-1;do e/=1024,++o;while(Math.round(Math.abs(e)*100)/100>=1024&&o<t.length-1);return e.toFixed(2)+" "+t[o]}},created:function(){const e=parseInt(this.item.updateInterval,10)||0;e>0&&setInterval(()=>this.fetchConfig(),e),this.fetchConfig()},methods:{fetchConfig:function(){const e={"x-api-key":this.item.apikey};this.fetch("/api/server/statistics",{headers:e}).then(t=>{this.photos=t.photos,this.videos=t.videos,this.usage=t.usage,this.users=t.usageByUser.length}).catch(t=>{console.error(t),this.serverError=!0})}}},g={class:"notifs"},_={key:0,class:"notif users",title:"Users"},v={key:1,class:"notif photos",title:"Photos"},y={key:2,class:"notif videos",title:"Videos"},k={key:3,class:"notif usage",title:"Usage"},B={key:4,class:"notif errors",title:"Connection error to Immich API, check your url and apikey in config.yml"};function I(e,t,o,C,b,a){const c=l("Generic");return s(),d(c,{item:o.item},{indicator:m(()=>[f("div",g,[e.users>0?(s(),i("strong",_,n(e.users),1)):r("",!0),e.photos>0?(s(),i("strong",v,n(e.photos),1)):r("",!0),e.videos>0?(s(),i("strong",y,n(e.videos),1)):r("",!0),e.usage>0?(s(),i("strong",k,n(a.humanizeSize),1)):r("",!0),e.serverError?(s(),i("strong",B,"?")):r("",!0)])]),_:1},8,["item"])}const E=h(p,[["render",I],["__scopeId","data-v-bae698a9"]]);export{E as default};
