import{_ as p,s as m,r as _,c as y,o as s,w as u,b as o,d as v,e as r,t as a,F as i,a as n}from"./index-NXnxvJjD.js";const d=["B","KB","MB","GB"],h=t=>{let e=0;for(;t>1e3&&e<d.length;)t/=1e3,e++;return Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(t||0)+` ${d[e]}/s`},B={name:"QBittorrent",mixins:[m],props:{item:Object},data:()=>({dl:null,ul:null,count:null,error:null}),computed:{downRate:function(){return h(this.dl)},upRate:function(){return h(this.ul)}},created(){const t=parseInt(this.item.rateInterval,10)||0,e=parseInt(this.item.torrentInterval,10)||0;t>0&&setInterval(()=>this.getRate(),t),e>0&&setInterval(()=>this.fetchCount(),e),this.getRate(),this.fetchCount()},methods:{fetchCount:async function(){try{const t=await this.fetch("/api/v2/torrents/info");this.error=!1,this.count=t.length}catch(t){this.error=!0,console.error(t)}},getRate:async function(){try{const t=await this.fetch("/api/v2/transfer/info");this.error=!1,this.dl=t.dl_info_speed,this.ul=t.up_info_speed}catch(t){this.error=!0,console.error(t)}}}},I={class:"title is-4"},w={class:"subtitle is-6"},g={key:0,class:"error"},k={class:"down monospace"},R={class:"up monospace"},b={key:0,class:"count"};function C(t,e,c,F,N,l){const f=_("Generic");return s(),y(f,{item:c.item},{content:u(()=>[n("p",I,a(c.item.name),1),n("p",w,[t.error?(s(),o("span",g,"An error has occurred.")):(s(),o(i,{key:1},[n("span",k,[e[0]||(e[0]=n("p",{class:"fas fa-download"},null,-1)),r(" "+a(l.downRate),1)]),n("span",R,[e[1]||(e[1]=n("p",{class:"fas fa-upload"},null,-1)),r(" "+a(l.upRate),1)])],64))])]),indicator:u(()=>[t.error?v("",!0):(s(),o("span",b,[r(a(t.count)+" ",1),t.count===1?(s(),o(i,{key:0},[r("torrent")],64)):(s(),o(i,{key:1},[r("torrents")],64))]))]),_:1},8,["item"])}const G=p(B,[["render",C],["__scopeId","data-v-d34c7f02"]]);export{G as default};
